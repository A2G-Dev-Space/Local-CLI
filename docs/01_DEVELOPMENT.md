# ê°œë°œì ì¢…í•© ê°€ì´ë“œ (Development Guide)

ì´ ë¬¸ì„œëŠ” **OPEN-CLI** í”„ë¡œì íŠ¸ì˜ ì „ì²´ êµ¬ì¡°, ì•„í‚¤í…ì²˜, í•µì‹¬ ê¸°ëŠ¥, ê°œë°œ ê·œì¹™ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
**Python ê°œë°œì**ë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ TypeScript/React ê°œë…ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ì •ì²´ì„±](#1-í”„ë¡œì íŠ¸-ì •ì²´ì„±)
2. [ê¸°ìˆ  ìŠ¤íƒ ì´í•´í•˜ê¸° (Python ê°œë°œììš©)](#2-ê¸°ìˆ -ìŠ¤íƒ-ì´í•´í•˜ê¸°-python-ê°œë°œììš©)
3. [í´ë” êµ¬ì¡°](#3-í´ë”-êµ¬ì¡°)
4. [í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…](#4-í•µì‹¬-ê¸°ëŠ¥-ìƒì„¸-ì„¤ëª…)
   - 4.1 [File-Tools (íŒŒì¼ ë„êµ¬)](#41-file-tools-íŒŒì¼-ë„êµ¬)
   - 4.2 [LLM-Client (LLM í´ë¼ì´ì–¸íŠ¸)](#42-llm-client-llm-í´ë¼ì´ì–¸íŠ¸)
   - 4.3 [Plan-Execute (ê³„íš ìˆ˜ë¦½ ë° ì‹¤í–‰)](#43-plan-execute-ê³„íš-ìˆ˜ë¦½-ë°-ì‹¤í–‰)
   - 4.4 [Agent-Loop (ì—ì´ì „íŠ¸ ë£¨í”„)](#44-agent-loop-ì—ì´ì „íŠ¸-ë£¨í”„)
   - 4.5 [Plan-Execute vs Agent-Loop ê´€ê³„](#45-plan-execute-vs-agent-loop-ê´€ê³„)
   - 4.6 [Session (ì„¸ì…˜ ê´€ë¦¬)](#46-session-ì„¸ì…˜-ê´€ë¦¬)
   - 4.7 [Config (ì„¤ì • ê´€ë¦¬)](#47-config-ì„¤ì •-ê´€ë¦¬)
   - 4.8 [Local-RAG (ë¡œì»¬ ë¬¸ì„œ ê²€ìƒ‰)](#48-local-rag-ë¡œì»¬-ë¬¸ì„œ-ê²€ìƒ‰)
   - 4.9 [Integration (í†µí•© ì›Œí¬í”Œë¡œìš°)](#49-integration-í†µí•©-ì›Œí¬í”Œë¡œìš°)
   - 4.10 [Multi-Layer Execution (ë‹¤ê³„ì¸µ ì‹¤í–‰)](#410-multi-layer-execution-ë‹¤ê³„ì¸µ-ì‹¤í–‰)
5. [ë°ì´í„° íë¦„ ì•„í‚¤í…ì²˜](#5-ë°ì´í„°-íë¦„-ì•„í‚¤í…ì²˜)
6. [ìƒˆ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°](#6-ìƒˆ-ê¸°ëŠ¥-ì¶”ê°€í•˜ê¸°)
7. [ì½”ë”© ê·œì¹™](#7-ì½”ë”©-ê·œì¹™)
8. [CLI ì‹¤í–‰ ëª¨ë“œ](#8-cli-ì‹¤í–‰-ëª¨ë“œ)

---

## 1. í”„ë¡œì íŠ¸ ì •ì²´ì„±

### OPEN-CLIë€?

**ì˜¤í”„ë¼ì¸ ê¸°ì—… í™˜ê²½ì„ ìœ„í•œ ë¡œì»¬ LLM CLI í”Œë«í¼**ì…ë‹ˆë‹¤.

- ì¸í„°ë„· ì—†ì´ ë…ë¦½ì ìœ¼ë¡œ ì‘ë™
- ê¸°ì—…ì˜ ë¡œì»¬ LLM ì„œë²„(OpenAI Compatible)ì™€ ì—°ê²°
- AIê°€ ì§ì ‘ íŒŒì¼ì„ ì½ê³ , ì“°ê³ , ê²€ìƒ‰í•˜ê³ , ì½”ë“œë¥¼ ì‹¤í–‰
- í„°ë¯¸ë„ì—ì„œ Interactive UIë¡œ AIì™€ ëŒ€í™”

### í•µì‹¬ ê°€ì¹˜

| íŠ¹ì§• | ì„¤ëª… |
|------|------|
| ì™„ì „ ì˜¤í”„ë¼ì¸ | ì¸í„°ë„· ì—°ê²° ì—†ì´ ì‘ë™ |
| ì‚¬ë‚´ ëª¨ë¸ í†µí•© | OpenAI Compatible API ì§€ì› |
| Plan & Execute | ë³µì¡í•œ ì‘ì—…ì„ ìë™ìœ¼ë¡œ ë¶„í•´í•˜ì—¬ ìˆœì°¨ ì‹¤í–‰ |
| Human-in-the-Loop | ìœ„í—˜í•œ ì‘ì—… ì „ ì‚¬ìš©ì ìŠ¹ì¸ ìš”ì²­ |
| Local RAG | ë¡œì»¬ ë¬¸ì„œ ê¸°ë°˜ ì§€ì‹ ê²€ìƒ‰ |

---

## 2. ê¸°ìˆ  ìŠ¤íƒ ì´í•´í•˜ê¸° (Python ê°œë°œììš©)

### 2.1 TypeScript vs Python ë¹„êµ

```python
# Python
def add(a: int, b: int) -> int:
    return a + b
```

```typescript
// TypeScript
function add(a: number, b: number): number {
    return a + b;
}
```

**í•µì‹¬ ì°¨ì´ì :**
- Pythonì˜ íƒ€ì… íŒíŠ¸ëŠ” ì„ íƒì‚¬í•­ì´ì§€ë§Œ, TypeScriptëŠ” ì»´íŒŒì¼ ì‹œì ì— íƒ€ì… ê²€ì‚¬
- `npm` = Pythonì˜ `pip`, `package.json` = `requirements.txt`
- `import { X } from './file'` = Pythonì˜ `from file import X`

### 2.2 Reactê°€ í„°ë¯¸ë„ì—ì„œ UIë¥¼ ë§Œë“œëŠ” ë°©ë²•

Pythonìœ¼ë¡œ í„°ë¯¸ë„ UIë¥¼ ë§Œë“¤ ë•Œ:
```python
# Python - ì „í†µì ì¸ ë°©ì‹
print("Hello, World!")
user_input = input("Enter name: ")
print(f"Welcome, {user_input}!")
```

ì´ ë°©ì‹ì˜ ë¬¸ì œì :
- í™”ë©´ì„ ê°±ì‹ í•˜ë ¤ë©´ ì „ì²´ë¥¼ ë‹¤ì‹œ ê·¸ë ¤ì•¼ í•¨
- ë³µì¡í•œ ë ˆì´ì•„ì›ƒ êµ¬í˜„ì´ ì–´ë ¤ì›€
- ì‹¤ì‹œê°„ ìƒíƒœ ë³€í™” ë°˜ì˜ì´ ì–´ë ¤ì›€

**React + Ink ë°©ì‹:**

```tsx
// TypeScript/React - ì„ ì–¸ì  ë°©ì‹
import { Box, Text } from 'ink';
import { useState } from 'react';

function App() {
    const [name, setName] = useState('');  // ìƒíƒœ ê´€ë¦¬

    return (
        <Box flexDirection="column">
            <Text color="cyan">Hello, World!</Text>
            <Text>Welcome, {name}!</Text>
        </Box>
    );
}
```

**ë™ì‘ ì›ë¦¬:**
1. **Virtual DOM**: Reactê°€ UIì˜ "ê°€ìƒ ë²„ì „"ì„ ë©”ëª¨ë¦¬ì— ìœ ì§€
2. **State (ìƒíƒœ)**: `useState`ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³ , ë°ì´í„°ê°€ ë³€í•˜ë©´ UIê°€ ìë™ ê°±ì‹ 
3. **Ink ë Œë”ëŸ¬**: Reactì˜ Virtual DOMì„ í„°ë¯¸ë„ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì¶œë ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Component (JSX)                       â”‚
â”‚       â†“                                      â”‚
â”‚  Virtual DOM (ë©”ëª¨ë¦¬ ë‚´ UI êµ¬ì¡°)              â”‚
â”‚       â†“                                      â”‚
â”‚  Ink Renderer (í„°ë¯¸ë„ ë¬¸ìì—´ë¡œ ë³€í™˜)           â”‚
â”‚       â†“                                      â”‚
â”‚  Terminal Output (ì‹¤ì œ í™”ë©´ì— í‘œì‹œ)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Pythonì˜ `curses` ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, ì„ ì–¸ì ì´ê³  ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ì´ë¼ëŠ” ì ì´ ë‹¤ë¦…ë‹ˆë‹¤.

### 2.3 ì£¼ìš” Ink ì»´í¬ë„ŒíŠ¸

| Ink ì»´í¬ë„ŒíŠ¸ | Python ëŒ€ì‘ | ì„¤ëª… |
|-------------|-------------|------|
| `<Box>` | `curses.newwin()` | ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ |
| `<Text>` | `print()` | í…ìŠ¤íŠ¸ ì¶œë ¥ |
| `useInput()` | `getch()` | í‚¤ë³´ë“œ ì…ë ¥ ì²˜ë¦¬ |
| `useState()` | ì¼ë°˜ ë³€ìˆ˜ | ìƒíƒœ ê´€ë¦¬ (ë³€ê²½ ì‹œ UI ìë™ ê°±ì‹ ) |

---

## 3. í´ë” êµ¬ì¡°

```
src/
â”œâ”€â”€ cli.ts                          # ì§„ì…ì  (main í•¨ìˆ˜)
â”œâ”€â”€ index.ts                        # ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§„ì…ì 
â”œâ”€â”€ constants.ts                    # ìƒìˆ˜ ì •ì˜
â”‚
â”œâ”€â”€ core/                           # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (UI ë¬´ê´€)
â”‚   â”œâ”€â”€ llm-client.ts              # LLM API í†µì‹  í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ config-manager.ts          # ì„¤ì • íŒŒì¼ ê´€ë¦¬
â”‚   â”œâ”€â”€ session-manager.ts         # ì„¸ì…˜ ì €ì¥/ë³µêµ¬
â”‚   â”œâ”€â”€ agent-loop.ts              # Gather â†’ Act â†’ Verify ë£¨í”„
â”‚   â”œâ”€â”€ context-gatherer.ts        # ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘ (íŒŒì¼ íƒìƒ‰)
â”‚   â”œâ”€â”€ action-executor.ts         # ì•¡ì…˜ ìƒì„± ë° ì‹¤í–‰
â”‚   â”œâ”€â”€ work-verifier.ts           # ì‘ì—… ì™„ë£Œ ê²€ì¦
â”‚   â”œâ”€â”€ docs-search-agent.ts       # ë¡œì»¬ ë¬¸ì„œ RAG ê²€ìƒ‰
â”‚   â”œâ”€â”€ document-manager.ts        # ë¬¸ì„œ ì¸ë±ì‹± ê´€ë¦¬
â”‚   â”œâ”€â”€ planning-llm.ts            # TODO ë¦¬ìŠ¤íŠ¸ ìƒì„± LLM
â”‚   â”œâ”€â”€ bash-command-tool.ts       # Bash ëª…ë ¹ ì‹¤í–‰ (ë³´ì•ˆ ê²€ì¦)
â”‚   â”œâ”€â”€ internal-monologue.ts      # Extended Thinking
â”‚   â”œâ”€â”€ scratchpad.ts              # ì™¸ë¶€ TODO íŒŒì¼ ê´€ë¦¬
â”‚   â””â”€â”€ auto-updater.ts            # GitHub ìë™ ì—…ë°ì´íŠ¸
â”‚
â”œâ”€â”€ plan-and-execute/               # Plan & Execute ì•„í‚¤í…ì²˜
â”‚   â”œâ”€â”€ orchestrator.ts            # ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚   â”œâ”€â”€ state-manager.ts           # ì‹¤í–‰ ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ approval-manager.ts        # ì‚¬ìš©ì ìŠ¹ì¸ ê´€ë¦¬ (HITL)
â”‚   â”œâ”€â”€ risk-analyzer.ts           # ìœ„í—˜ë„ ë¶„ì„
â”‚   â”œâ”€â”€ llm-schemas.ts             # LLM ì…ì¶œë ¥ ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ types.ts                   # íƒ€ì… ì •ì˜
â”‚
â”œâ”€â”€ execution/                      # ë‹¤ê³„ì¸µ ì‹¤í–‰ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ layer-manager.ts           # ê³„ì¸µ ì„ íƒ ë° ê´€ë¦¬
â”‚   â”œâ”€â”€ standard-tools.ts          # í‘œì¤€ ë„êµ¬ ê³„ì¸µ
â”‚   â”œâ”€â”€ sdk-layer.ts               # ë™ì  ì½”ë“œ ìƒì„± ê³„ì¸µ
â”‚   â”œâ”€â”€ subagent-layer.ts          # ì„œë¸Œ ì—ì´ì „íŠ¸ ê³„ì¸µ
â”‚   â””â”€â”€ skills-layer.ts            # ìŠ¤í‚¬ ê³„ì¸µ
â”‚
â”œâ”€â”€ tools/                          # AI ë„êµ¬ ì •ì˜
â”‚   â”œâ”€â”€ file-tools.ts              # íŒŒì¼ ì‹œìŠ¤í…œ ë„êµ¬
â”‚   â””â”€â”€ index.ts                   # ë„êµ¬ ë‚´ë³´ë‚´ê¸°
â”‚
â”œâ”€â”€ ui/                             # UI ì»´í¬ë„ŒíŠ¸ (React/Ink)
â”‚   â”œâ”€â”€ ink-entry.tsx              # Ink ë Œë”ë§ ì§„ì…ì 
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ PlanExecuteApp.tsx     # ë©”ì¸ ì•± (ê°€ì¥ ì¤‘ìš”!)
â”‚   â”‚   â”œâ”€â”€ CustomTextInput.tsx    # í…ìŠ¤íŠ¸ ì…ë ¥ (í•œê¸€ ì§€ì›)
â”‚   â”‚   â”œâ”€â”€ FileBrowser.tsx        # @ íŒŒì¼ ì„ íƒê¸°
â”‚   â”‚   â”œâ”€â”€ CommandBrowser.tsx     # / ëª…ë ¹ì–´ ì„ íƒê¸°
â”‚   â”‚   â”œâ”€â”€ ApprovalPrompt.tsx     # HITL ìŠ¹ì¸ í”„ë¡¬í”„íŠ¸
â”‚   â”‚   â”œâ”€â”€ TodoListView.tsx       # TODO ë¦¬ìŠ¤íŠ¸ ë·°
â”‚   â”‚   â””â”€â”€ StatusBar.tsx          # ìƒíƒœë°”
â”‚   â””â”€â”€ hooks/
â”‚       â”œâ”€â”€ slashCommandProcessor.ts  # /ëª…ë ¹ì–´ ì²˜ë¦¬
â”‚       â”œâ”€â”€ atFileProcessor.ts        # @íŒŒì¼ ì²˜ë¦¬
â”‚       â””â”€â”€ useFileList.ts            # íŒŒì¼ ëª©ë¡ ë¡œë“œ
â”‚
â”œâ”€â”€ types/                          # ì „ì—­ íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ utils/                          # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ logger.ts                  # ë¡œê¹… ì‹œìŠ¤í…œ (í•„ë…!)
â”‚   â”œâ”€â”€ json-stream-logger.ts      # JSON ë¡œê·¸ ìŠ¤íŠ¸ë¦¼
â”‚   â”œâ”€â”€ cache.ts                   # ìºì‹±
â”‚   â”œâ”€â”€ file-system.ts             # íŒŒì¼ ì‹œìŠ¤í…œ í—¬í¼
â”‚   â””â”€â”€ retry.ts                   # ì¬ì‹œë„ ë¡œì§
â”‚
â”œâ”€â”€ errors/                         # ì—ëŸ¬ í´ë˜ìŠ¤ ì •ì˜
â”‚   â”œâ”€â”€ base.ts                    # ê¸°ë³¸ ì—ëŸ¬
â”‚   â”œâ”€â”€ llm.ts                     # LLM ê´€ë ¨ ì—ëŸ¬
â”‚   â”œâ”€â”€ network.ts                 # ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬
â”‚   â””â”€â”€ file.ts                    # íŒŒì¼ ì—ëŸ¬
â”‚
â”œâ”€â”€ evaluation/                     # í‰ê°€ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ evaluator.ts               # í‰ê°€ ë¡œì§
â”‚   â”œâ”€â”€ report-generator.ts        # ë¦¬í¬íŠ¸ ìƒì„±
â”‚   â””â”€â”€ code-validator.ts          # ì½”ë“œ ê²€ì¦
â”‚
â”œâ”€â”€ verification/                   # ê²€ì¦ ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ verification-system.ts     # Rule/Visual/LLM-Judge
â”‚
â””â”€â”€ workflows/                      # ì›Œí¬í”Œë¡œìš°
    â””â”€â”€ tdd-workflow.ts            # TDD ìë™í™”
```

### íŒŒì¼ ì €ì¥ ìœ„ì¹˜

```
~/.open-cli/                        # ì„¤ì • ë° ë°ì´í„° ë””ë ‰í† ë¦¬
â”œâ”€â”€ config.json                    # ë©”ì¸ ì„¤ì •
â”œâ”€â”€ endpoints.json                 # LLM ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡
â”œâ”€â”€ docs/                          # ë¡œì»¬ ë¬¸ì„œ (RAGìš©)
â”œâ”€â”€ backups/                       # ìë™ ë°±ì—…
â””â”€â”€ projects/{cwd}/                # í”„ë¡œì íŠ¸ë³„ ë°ì´í„°
    â”œâ”€â”€ {session-id}.json          # ì„¸ì…˜ ë°ì´í„°
    â”œâ”€â”€ {session-id}_log.json      # JSON ë¡œê·¸
    â””â”€â”€ {session-id}_error.json    # ì—ëŸ¬ ë¡œê·¸
```

---

## 4. í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…

ì´ ì„¹ì…˜ì—ì„œëŠ” OPEN-CLIì˜ ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.
ê° ê¸°ëŠ¥ì˜ **ì—­í• **, **ë™ì‘ ì›ë¦¬**, **ê´€ê³„**ë¥¼ ëª…í™•íˆ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### 4.1 File-Tools (íŒŒì¼ ë„êµ¬)

**ëª©ì **: AIê°€ íŒŒì¼ ì‹œìŠ¤í…œì„ ì¡°ì‘í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë„êµ¬ ëª¨ìŒ

**ìœ„ì¹˜**: `src/tools/file-tools.ts`

#### ì œê³µ ë„êµ¬

| ë„êµ¬ | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `read_file` | íŒŒì¼ ë‚´ìš© ì½ê¸° | `file_path` |
| `write_file` | íŒŒì¼ ìƒì„±/ìˆ˜ì • | `file_path`, `content` |
| `list_files` | ë””ë ‰í† ë¦¬ ëª©ë¡ ì¡°íšŒ | `directory_path` |
| `find_files` | glob íŒ¨í„´ìœ¼ë¡œ íŒŒì¼ ê²€ìƒ‰ | `pattern`, `directory_path?` |

#### ë™ì‘ íë¦„

```
ì‚¬ìš©ì: "package.json ì½ì–´ì¤˜"
        â†“
LLMì´ Tool Call ìƒì„±:
{
  "name": "read_file",
  "arguments": { "file_path": "package.json" }
}
        â†“
executeReadFile() ì‹¤í–‰
        â†“
íŒŒì¼ ë‚´ìš© ë°˜í™˜ â†’ LLMì´ ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ
```

#### ë³´ì•ˆ ê²€ì¦

```typescript
// ê²½ë¡œ ì •ê·œí™” ë° ê²€ì¦
const normalizedPath = path.resolve(filePath);

// ë¯¼ê° íŒŒì¼ ì ‘ê·¼ ì°¨ë‹¨
const BLOCKED_PATTERNS = [
  /\.env$/,
  /credentials\.json$/,
  /\.ssh\//,
  /\.aws\//,
];
```

#### Python ë¹„êµ

```python
# Pythonì—ì„œì˜ íŒŒì¼ ì½ê¸°
with open('package.json', 'r') as f:
    content = f.read()
```

```typescript
// TypeScriptì—ì„œì˜ íŒŒì¼ ì½ê¸°
import { promises as fs } from 'fs';
const content = await fs.readFile('package.json', 'utf-8');
```

---

### 4.2 LLM-Client (LLM í´ë¼ì´ì–¸íŠ¸)

**ëª©ì **: OpenAI Compatible APIì™€ í†µì‹ í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸

**ìœ„ì¹˜**: `src/core/llm-client.ts`

#### ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ë©”ì„œë“œ | ì„¤ëª… |
|------|--------|------|
| ê¸°ë³¸ ëŒ€í™” | `sendMessage()` | ë‹¨ì¼ ë©”ì‹œì§€ ì „ì†¡ ë° ì‘ë‹µ ìˆ˜ì‹  |
| ìŠ¤íŠ¸ë¦¬ë° | `sendMessageStream()` | ì‹¤ì‹œê°„ í† í° ë‹¨ìœ„ ì‘ë‹µ |
| Tool Calling | `sendMessageWithTools()` | AIê°€ ë„êµ¬ë¥¼ í˜¸ì¶œí•˜ë©° ì‘ë‹µ |
| ì—ëŸ¬ ì²˜ë¦¬ | ìë™ | ë„¤íŠ¸ì›Œí¬, API, Context ì´ˆê³¼ ì—ëŸ¬ ì²˜ë¦¬ |

#### ë©”ì‹œì§€ êµ¬ì¡°

```typescript
interface Message {
  role: 'system' | 'user' | 'assistant' | 'tool';
  content: string;
  tool_calls?: ToolCall[];     // AIê°€ í˜¸ì¶œí•  ë„êµ¬
  tool_call_id?: string;       // ë„êµ¬ ì‘ë‹µ ID
}
```

#### ìŠ¤íŠ¸ë¦¬ë° ë™ì‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Streaming Response Flow                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  LLM Server â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Client            â”‚
â”‚             chunk1: "ì•ˆë…•"                       â”‚
â”‚             chunk2: "í•˜ì„¸ìš”"                     â”‚
â”‚             chunk3: "!"                          â”‚
â”‚             [DONE]                               â”‚
â”‚                                                  â”‚
â”‚  í™”ë©´ ì¶œë ¥: "ì•ˆë…•" â†’ "ì•ˆë…•í•˜ì„¸ìš”" â†’ "ì•ˆë…•í•˜ì„¸ìš”!"  â”‚
â”‚            (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Tool Calling íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tool Calling Flow                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ì‚¬ìš©ì: "src í´ë”ì˜ íŒŒì¼ ëª©ë¡ ë³´ì—¬ì¤˜"                    â”‚
â”‚                   â†“                                         â”‚
â”‚  2. LLM ì‘ë‹µ: tool_calls: [{                                â”‚
â”‚       name: "list_files",                                   â”‚
â”‚       arguments: { directory_path: "src" }                  â”‚
â”‚     }]                                                      â”‚
â”‚                   â†“                                         â”‚
â”‚  3. Clientê°€ ë„êµ¬ ì‹¤í–‰: executeListFiles({ directory: "src" })â”‚
â”‚                   â†“                                         â”‚
â”‚  4. ê²°ê³¼ë¥¼ LLMì— ì „ë‹¬: role: "tool", content: "[ê²°ê³¼]"       â”‚
â”‚                   â†“                                         â”‚
â”‚  5. LLMì´ ìµœì¢… ì‘ë‹µ: "src í´ë”ì—ëŠ” ë‹¤ìŒ íŒŒì¼ë“¤ì´ ìˆìŠµë‹ˆë‹¤..."  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì—ëŸ¬ ì²˜ë¦¬ ê³„ì¸µ

```typescript
try {
  await llmClient.sendMessage(message);
} catch (error) {
  if (error instanceof NetworkError) {
    // ì—°ê²° ì‹¤íŒ¨, DNS ì˜¤ë¥˜, íƒ€ì„ì•„ì›ƒ
  } else if (error instanceof APIError) {
    // 401: ì¸ì¦ ì‹¤íŒ¨
    // 429: Rate Limit
    // 500: ì„œë²„ ì˜¤ë¥˜
  } else if (error instanceof ContextLengthError) {
    // í† í° ì œí•œ ì´ˆê³¼
  }
}
```

---

### 4.3 Plan-Execute (ê³„íš ìˆ˜ë¦½ ë° ì‹¤í–‰)

**ëª©ì **: ë³µì¡í•œ ì‚¬ìš©ì ìš”ì²­ì„ TODO ë¦¬ìŠ¤íŠ¸ë¡œ ë¶„í•´í•˜ê³  ìˆœì°¨ ì‹¤í–‰

**ìœ„ì¹˜**: `src/plan-and-execute/`

#### í•µì‹¬ ì»´í¬ë„ŒíŠ¸

| íŒŒì¼ | ì—­í•  |
|------|------|
| `orchestrator.ts` | ì „ì²´ ì›Œí¬í”Œë¡œìš° ì¡°ìœ¨ (ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬) |
| `state-manager.ts` | ì‹¤í–‰ ìƒíƒœ ë° íˆìŠ¤í† ë¦¬ ê´€ë¦¬ |
| `approval-manager.ts` | HITL ì‚¬ìš©ì ìŠ¹ì¸ ê´€ë¦¬ |
| `risk-analyzer.ts` | ì‘ì—… ìœ„í—˜ë„ ë¶„ì„ |
| `llm-schemas.ts` | LLM ì…ì¶œë ¥ í˜•ì‹ ì •ì˜ |

#### Plan-Executeì˜ ì—­í• 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Plan-Execute ì—­í•                         â”‚
â”‚               "ë¬´ì—‡ì„ í• ì§€" ê²°ì •í•˜ëŠ” ìƒìœ„ ê³„ì¸µ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì…ë ¥: ì‚¬ìš©ì ìì—°ì–´ ìš”ì²­                                    â”‚
â”‚       "src í´ë”ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ë§Œë“¤ê³  ì‹¤í–‰í•´ì¤˜"               â”‚
â”‚                           â†“                                 â”‚
â”‚  Planning Phase:                                            â”‚
â”‚       LLMì´ ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ TODO ë¦¬ìŠ¤íŠ¸ ìƒì„±                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚       â”‚ TODO 1: src í´ë” êµ¬ì¡° í™•ì¸       â”‚                   â”‚
â”‚       â”‚ TODO 2: í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±         â”‚                   â”‚
â”‚       â”‚ TODO 3: í…ŒìŠ¤íŠ¸ ì‹¤í–‰              â”‚                   â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â†“                                 â”‚
â”‚  HITL Gate: ì‚¬ìš©ìì—ê²Œ ê³„íš ìŠ¹ì¸ ìš”ì²­                        â”‚
â”‚                           â†“                                 â”‚
â”‚  Execute Phase:                                             â”‚
â”‚       ê° TODOë¥¼ ìˆœì°¨ì ìœ¼ë¡œ Agent-Loopì— ìœ„ì„                 â”‚
â”‚                           â†“                                 â”‚
â”‚  ì¶œë ¥: ì „ì²´ ì‹¤í–‰ ê²°ê³¼ ìš”ì•½                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì‹¤í–‰ ìƒíƒœ ë¨¸ì‹ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    planning    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IDLE    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ PLANNING â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                 â”‚ plan created
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    approved    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DONE    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ APPROVAL â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    rejected    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â†‘                           â”‚ approved
     â”‚                           â†“
     â”‚         success      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚EXECUTING â”‚ â†â”€â”
                            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚
                                 â”‚ error   â”‚ retry
                                 â†“         â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                            â”‚ DEBUGGINGâ”‚ â”€â”€â”˜
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### HITL (Human-in-the-Loop) ìŠ¹ì¸ ê²Œì´íŠ¸

```typescript
// ìŠ¹ì¸ì´ í•„ìš”í•œ ìœ„í—˜ ë ˆë²¨
const RISK_LEVELS = {
  CRITICAL: ['rm -rf', 'DROP DATABASE', 'chmod 777'],
  HIGH:     ['sudo', 'ì†ŒìŠ¤ì½”ë“œ ì‚­ì œ', 'git push --force'],
  MEDIUM:   ['íŒŒì¼ ìˆ˜ì •', 'npm install', 'git commit'],
  LOW:      ['íŒŒì¼ ì½ê¸°', 'ê²€ìƒ‰', 'ì¡°íšŒ'],
};

// Critical, HighëŠ” ë°˜ë“œì‹œ ìŠ¹ì¸ í•„ìš”
// Mediumì€ ì„¤ì •ì— ë”°ë¼
// LowëŠ” ìë™ ìŠ¹ì¸
```

---

### 4.4 Agent-Loop (ì—ì´ì „íŠ¸ ë£¨í”„)

**ëª©ì **: ë‹¨ì¼ TODO í•­ëª©ì„ Gather â†’ Act â†’ Verify ì‚¬ì´í´ë¡œ ì‹¤í–‰

**ìœ„ì¹˜**: `src/core/agent-loop.ts`

#### í•µì‹¬ ì»´í¬ë„ŒíŠ¸

| íŒŒì¼ | ì—­í•  |
|------|------|
| `agent-loop.ts` | ë£¨í”„ ì»¨íŠ¸ë¡¤ëŸ¬ (ë©”ì¸) |
| `context-gatherer.ts` | ì‘ì—…ì— í•„ìš”í•œ ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘ |
| `action-executor.ts` | ì‹¤ì œ ì•¡ì…˜ ìƒì„± ë° ì‹¤í–‰ |
| `work-verifier.ts` | ì‘ì—… ì™„ë£Œ ì—¬ë¶€ ê²€ì¦ |

#### Agent-Loopì˜ ì—­í• 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent-Loop ì—­í•                           â”‚
â”‚               "ì–´ë–»ê²Œ í• ì§€" ì‹¤í–‰í•˜ëŠ” í•˜ìœ„ ê³„ì¸µ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì…ë ¥: ë‹¨ì¼ TODO í•­ëª©                                        â”‚
â”‚       "í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±"                                     â”‚
â”‚                           â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Iteration 1                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ 1. GATHER: ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘                     â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    - í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„                      â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    - ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒ¨í„´ íŒŒì•…                   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    - package.json í™•ì¸                       â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                      â†“                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ 2. ACT: ì•¡ì…˜ ì‹¤í–‰                            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    - write_file ë„êµ¬ë¡œ test.ts ìƒì„±          â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                      â†“                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ 3. VERIFY: ê²€ì¦                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    - íŒŒì¼ ì¡´ì¬ í™•ì¸ âœ“                        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    - ë¬¸ë²• ê²€ì‚¬ âœ“                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚    â†’ ì™„ë£Œ!                                   â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â†“                                 â”‚
â”‚  ì¶œë ¥: TODO ì™„ë£Œ ê²°ê³¼                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ íë¦„

```
Iteration 1:
  ğŸ“Š Gather â†’ ğŸ¯ Act â†’ ğŸ” Verify: âŒ ë¬¸ë²• ì˜¤ë¥˜
                                   â”‚
                                   â†“ í”¼ë“œë°± ì¶”ê°€
Iteration 2:
  ğŸ“Š Gather (+ í”¼ë“œë°±) â†’ ğŸ¯ Act (ìˆ˜ì •) â†’ ğŸ” Verify: âŒ import ëˆ„ë½
                                          â”‚
                                          â†“ í”¼ë“œë°± ì¶”ê°€
Iteration 3:
  ğŸ“Š Gather (+ í”¼ë“œë°±) â†’ ğŸ¯ Act (ìˆ˜ì •) â†’ ğŸ” Verify: âœ… ì™„ë£Œ!
```

#### ê²€ì¦ ìœ í˜•

```typescript
// 3ê°€ì§€ ê²€ì¦ ë°©ì‹
const VERIFICATION_MODES = {
  RULE_BASED: 'ê·œì¹™ ê¸°ë°˜ ê²€ì¦ (íŒŒì¼ ì¡´ì¬, ë¬¸ë²• ê²€ì‚¬)',
  VISUAL:     'ì‹œê°ì  ê²€ì¦ (ìŠ¤í¬ë¦°ìƒ· ë¹„êµ)',
  LLM_JUDGE:  'LLMì´ ê²°ê³¼ë¥¼ í‰ê°€',
};
```

---

### 4.5 Plan-Execute vs Agent-Loop ê´€ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Plan-Execute (Orchestrator)                    â”‚
â”‚         "ì „ì²´ ì‘ì—…ì„ TODOë¡œ ë¶„í•´í•˜ê³  ìˆœì„œëŒ€ë¡œ ì‹¤í–‰"          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   TODO 1 â”€â”€â†’ [Agent-Loop] â”€â”€â†’ ì™„ë£Œ                         â”‚
â”‚                  â†‘                                          â”‚
â”‚   TODO 2 â”€â”€â†’ [Agent-Loop] â”€â”€â†’ ì™„ë£Œ                         â”‚
â”‚                  â†‘                                          â”‚
â”‚   TODO 3 â”€â”€â†’ [Agent-Loop] â”€â”€â†’ ì™„ë£Œ                         â”‚
â”‚                                                             â”‚
â”‚         "ê° TODOë¥¼ Gather-Act-Verifyë¡œ ìˆ˜í–‰"                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| êµ¬ë¶„ | Plan-Execute | Agent-Loop |
|------|-------------|------------|
| **ë ˆë²¨** | ìƒìœ„ (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°) | í•˜ìœ„ (ì‹¤í–‰ê¸°) |
| **ì…ë ¥** | ì‚¬ìš©ì ìì—°ì–´ ìš”ì²­ | ë‹¨ì¼ TODO í•­ëª© |
| **ì¶œë ¥** | TODO ë¦¬ìŠ¤íŠ¸ + ì „ì²´ ì‹¤í–‰ ê²°ê³¼ | TODO 1ê°œ ì™„ë£Œ ê²°ê³¼ |
| **í•µì‹¬** | ê³„íš ìˆ˜ë¦½ + HITL ìŠ¹ì¸ | Gather-Act-Verify ë£¨í”„ |
| **ì¬ì‹œë„** | Debug ëª¨ë“œ (3íšŒ) | Iteration (10íšŒ) |

**ê°„ë‹¨íˆ**: Plan-ExecuteëŠ” **"ë¬´ì—‡ì„ í• ì§€"** ê²°ì •í•˜ê³ , Agent-Loopì€ **"ì–´ë–»ê²Œ í• ì§€"** ì‹¤í–‰í•©ë‹ˆë‹¤.

---

### 4.6 Session (ì„¸ì…˜ ê´€ë¦¬)

**ëª©ì **: ëŒ€í™” ë‚´ì—­ê³¼ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ë³µì›

**ìœ„ì¹˜**: `src/core/session-manager.ts`

#### ì„¸ì…˜ ë°ì´í„° êµ¬ì¡°

```typescript
interface SessionData {
  id: string;                    // ì„¸ì…˜ ê³ ìœ  ID
  messages: Message[];           // ëŒ€í™” ë‚´ì—­
  todos: TodoItem[];             // TODO ë¦¬ìŠ¤íŠ¸
  createdAt: string;             // ìƒì„± ì‹œê°„
  updatedAt: string;             // ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸
  metadata: {
    projectPath: string;         // í”„ë¡œì íŠ¸ ê²½ë¡œ
    messageCount: number;        // ë©”ì‹œì§€ ìˆ˜
  };
}
```

#### ì„¸ì…˜ ë¼ì´í”„ì‚¬ì´í´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Session Lifecycle                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ì•± ì‹œì‘                                                 â”‚
â”‚     â””â”€â†’ ìƒˆ ì„¸ì…˜ ID ìƒì„± (auto-save-{timestamp})             â”‚
â”‚                                                             â”‚
â”‚  2. ëŒ€í™” ì§„í–‰                                               â”‚
â”‚     â””â”€â†’ ë§¤ ë©”ì‹œì§€ë§ˆë‹¤ ìë™ ì €ì¥                             â”‚
â”‚         ~/.open-cli/projects/{cwd}/{session-id}.json        â”‚
â”‚                                                             â”‚
â”‚  3. ì•± ì¢…ë£Œ                                                 â”‚
â”‚     â””â”€â†’ ìµœì¢… ìƒíƒœ ì €ì¥                                      â”‚
â”‚                                                             â”‚
â”‚  4. ì¬ì‹œì‘ í›„ /load                                         â”‚
â”‚     â””â”€â†’ ì €ì¥ëœ ì„¸ì…˜ ëª©ë¡ í‘œì‹œ                               â”‚
â”‚     â””â”€â†’ ì„ íƒí•œ ì„¸ì…˜ ë³µì›                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì£¼ìš” ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `saveSession(id, data)` | ì„¸ì…˜ ì €ì¥ |
| `loadSession(id)` | ì„¸ì…˜ ë¡œë“œ |
| `listSessions()` | í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ì„¸ì…˜ ëª©ë¡ |
| `deleteSession(id)` | ì„¸ì…˜ ì‚­ì œ |

---

### 4.7 Config (ì„¤ì • ê´€ë¦¬)

**ëª©ì **: ì•± ì„¤ì • ë° LLM ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬

**ìœ„ì¹˜**: `src/core/config-manager.ts`

#### ì„¤ì • íŒŒì¼ êµ¬ì¡°

```
~/.open-cli/
â”œâ”€â”€ config.json           # ë©”ì¸ ì„¤ì •
â””â”€â”€ endpoints.json        # LLM ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡
```

#### config.json

```json
{
  "activeEndpoint": "my-llm-server",
  "ui": {
    "theme": "dark",
    "showTimestamps": true
  },
  "logging": {
    "level": "info",
    "jsonStream": true
  }
}
```

#### endpoints.json

```json
{
  "endpoints": [
    {
      "id": "my-llm-server",
      "name": "My LLM Server",
      "baseUrl": "https://llm.company.com/v1/",
      "apiKey": "sk-xxx",
      "models": [
        {
          "id": "gpt-4",
          "name": "GPT-4",
          "maxTokens": 8192
        }
      ]
    }
  ]
}
```

#### ì„¤ì • íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Config Flow                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ì•± ì‹œì‘                                                 â”‚
â”‚     â””â”€â†’ ConfigManager.load()                                â”‚
â”‚     â””â”€â†’ ì„¤ì • íŒŒì¼ ì—†ìœ¼ë©´ â†’ config init ì•ˆë‚´                 â”‚
â”‚                                                             â”‚
â”‚  2. config init                                             â”‚
â”‚     â””â”€â†’ ëŒ€í™”í˜• ì„¤ì • (ì—”ë“œí¬ì¸íŠ¸, API Key, ëª¨ë¸)             â”‚
â”‚     â””â”€â†’ ì—°ê²° í…ŒìŠ¤íŠ¸                                         â”‚
â”‚     â””â”€â†’ ì„¤ì • íŒŒì¼ ì €ì¥                                      â”‚
â”‚                                                             â”‚
â”‚  3. config show                                             â”‚
â”‚     â””â”€â†’ í˜„ì¬ ì„¤ì • ì¶œë ¥                                      â”‚
â”‚                                                             â”‚
â”‚  4. /endpoint ëª…ë ¹                                          â”‚
â”‚     â””â”€â†’ ë‹¤ë¥¸ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì „í™˜                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.8 Local-RAG (ë¡œì»¬ ë¬¸ì„œ ê²€ìƒ‰)

**ëª©ì **: ë¡œì»¬ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œì—ì„œ ê´€ë ¨ ì •ë³´ ê²€ìƒ‰ (Retrieval-Augmented Generation)

**ìœ„ì¹˜**: `src/core/docs-search-agent.ts`, `src/core/document-manager.ts`

#### RAG ê°œë… (Python ê°œë°œììš©)

```python
# Pythonì—ì„œì˜ RAG ê°œë…
def answer_question(question: str, documents: list[str]) -> str:
    # 1. ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ (Retrieval)
    relevant_docs = search_documents(question, documents)

    # 2. í”„ë¡¬í”„íŠ¸ì— ë¬¸ì„œ ì¶”ê°€ (Augmentation)
    prompt = f"ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ë‹µë³€:\n{relevant_docs}\n\nì§ˆë¬¸: {question}"

    # 3. LLMìœ¼ë¡œ ë‹µë³€ ìƒì„± (Generation)
    return llm.generate(prompt)
```

#### 4ë‹¨ê³„ ê²€ìƒ‰ ì „ëµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  4-Tier Search Strategy                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Query: "React hooks ì‚¬ìš©ë²•"                                â”‚
â”‚                                                             â”‚
â”‚  Tier 1: íŒŒì¼ëª… ê²€ìƒ‰ (íŠ¹ì • ë””ë ‰í† ë¦¬)                        â”‚
â”‚          ~/.open-cli/docs/ ì—ì„œ "react", "hooks" í¬í•¨ íŒŒì¼  â”‚
â”‚          â†’ ê²°ê³¼ ì—†ìŒ                                        â”‚
â”‚                                                             â”‚
â”‚  Tier 2: íŒŒì¼ëª… ê²€ìƒ‰ (ê´‘ë²”ìœ„)                               â”‚
â”‚          í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ê²€ìƒ‰                             â”‚
â”‚          â†’ docs/react-guide.md ë°œê²¬                         â”‚
â”‚                                                             â”‚
â”‚  Tier 3: ë‚´ìš© ê²€ìƒ‰ (íŠ¹ì •)                                   â”‚
â”‚          íŒŒì¼ ë‚´ìš©ì—ì„œ "hooks" ê²€ìƒ‰                         â”‚
â”‚          â†’ 3ê°œ ì„¹ì…˜ ë°œê²¬                                    â”‚
â”‚                                                             â”‚
â”‚  Tier 4: ë‚´ìš© ê²€ìƒ‰ (ê´‘ë²”ìœ„)                                 â”‚
â”‚          ê´€ë ¨ í‚¤ì›Œë“œ í™•ì¥ ê²€ìƒ‰                              â”‚
â”‚          â†’ ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ ë°œê²¬                               â”‚
â”‚                                                             â”‚
â”‚  ê²°ê³¼: ê´€ë ¨ ë¬¸ì„œ ì¡°ê°ë“¤ì„ LLM í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë¬¸ì„œ ì¸ë±ìŠ¤ êµ¬ì¡°

```typescript
interface DocumentIndex {
  documents: DocumentMetadata[];
  lastUpdated: string;
}

interface DocumentMetadata {
  id: string;
  title: string;
  tags: string[];
  filePath: string;
  excerpt: string;        // ì²« 200ì
  createdAt: string;
  updatedAt: string;
}
```

#### /docs ëª…ë ¹ì–´

| ëª…ë ¹ì–´ | ì„¤ëª… |
|--------|------|
| `/docs list` | ì €ì¥ëœ ë¬¸ì„œ ëª©ë¡ |
| `/docs search <query>` | ë¬¸ì„œ ë‚´ìš© ê²€ìƒ‰ |
| `/docs add` | ìƒˆ ë¬¸ì„œ ì¶”ê°€ |

---

### 4.9 Integration (í†µí•© ì›Œí¬í”Œë¡œìš°)

**ëª©ì **: ëª¨ë“  ê¸°ëŠ¥ì´ ì—°ê³„ë˜ì–´ ë™ì‘í•˜ëŠ” ì „ì²´ íë¦„

#### ì „ì²´ ì‹¤í–‰ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPLETE WORKFLOW                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì‚¬ìš©ì: "src í´ë”ì— ìœ í‹¸ í•¨ìˆ˜ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸í•´ì¤˜"           â”‚
â”‚                           â”‚                                 â”‚
â”‚                           â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. LLM-Client: ìš”ì²­ ë¶„ì„                              â”‚  â”‚
â”‚  â”‚    - ë©”ì‹œì§€ë¥¼ LLMì— ì „ì†¡                               â”‚  â”‚
â”‚  â”‚    - Tool ì‚¬ìš© ì—¬ë¶€ ê²°ì •                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                 â”‚
â”‚                           â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. Plan-Execute: ê³„íš ìˆ˜ë¦½                            â”‚  â”‚
â”‚  â”‚    - TODO 1: src í´ë” êµ¬ì¡° í™•ì¸                       â”‚  â”‚
â”‚  â”‚    - TODO 2: ìœ í‹¸ í•¨ìˆ˜ íŒŒì¼ ìƒì„±                       â”‚  â”‚
â”‚  â”‚    - TODO 3: í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±                         â”‚  â”‚
â”‚  â”‚    - TODO 4: í…ŒìŠ¤íŠ¸ ì‹¤í–‰                              â”‚  â”‚
â”‚  â”‚    â†’ HITL: ì‚¬ìš©ì ìŠ¹ì¸ ìš”ì²­                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                 â”‚
â”‚                           â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3. Agent-Loop: ê° TODO ì‹¤í–‰                           â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚    TODO 1 ì‹¤í–‰:                                       â”‚  â”‚
â”‚  â”‚    â”œâ”€ Gather: Local-RAGë¡œ í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„          â”‚  â”‚
â”‚  â”‚    â”œâ”€ Act: File-Toolsë¡œ list_files í˜¸ì¶œ              â”‚  â”‚
â”‚  â”‚    â””â”€ Verify: ê²°ê³¼ í™•ì¸ âœ“                            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚    TODO 2 ì‹¤í–‰:                                       â”‚  â”‚
â”‚  â”‚    â”œâ”€ Gather: ê¸°ì¡´ ìœ í‹¸ íŒ¨í„´ ë¶„ì„                     â”‚  â”‚
â”‚  â”‚    â”œâ”€ Act: File-Toolsë¡œ write_file í˜¸ì¶œ              â”‚  â”‚
â”‚  â”‚    â””â”€ Verify: íŒŒì¼ ì¡´ì¬ + ë¬¸ë²• ê²€ì‚¬ âœ“                 â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚    TODO 3, 4 ì‹¤í–‰...                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                 â”‚
â”‚                           â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 4. Session: ìë™ ì €ì¥                                 â”‚  â”‚
â”‚  â”‚    - ëŒ€í™” ë‚´ì—­ ì €ì¥                                   â”‚  â”‚
â”‚  â”‚    - TODO ìƒíƒœ ì €ì¥                                   â”‚  â”‚
â”‚  â”‚    - ë‚˜ì¤‘ì— /loadë¡œ ë³µì› ê°€ëŠ¥                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                 â”‚
â”‚                           â–¼                                 â”‚
â”‚  ê²°ê³¼: "ìœ í‹¸ í•¨ìˆ˜ì™€ í…ŒìŠ¤íŠ¸ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ í†µê³¼!"    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì—ëŸ¬ ë³µêµ¬ íë¦„

```
ì‘ì—… ì¤‘ ì—ëŸ¬ ë°œìƒ ì‹œ:

1. Agent-Loop ë ˆë²¨:
   â””â”€â†’ Verify ì‹¤íŒ¨ â†’ í”¼ë“œë°±ê³¼ í•¨ê»˜ ì¬ì‹œë„ (ìµœëŒ€ 10íšŒ)

2. Plan-Execute ë ˆë²¨:
   â””â”€â†’ Debug ëª¨ë“œ ì§„ì… â†’ LLMì´ ì—ëŸ¬ ë¶„ì„ â†’ ìˆ˜ì • ì‹œë„ (ìµœëŒ€ 3íšŒ)

3. ë³µêµ¬ ë¶ˆê°€ ì‹œ:
   â””â”€â†’ ì—ëŸ¬ ë¡œê·¸ ì €ì¥ ({session-id}_error.json)
   â””â”€â†’ ì‚¬ìš©ìì—ê²Œ ìƒì„¸ ì—ëŸ¬ ì •ë³´ í‘œì‹œ
   â””â”€â†’ ì„¸ì…˜ ì €ì¥ (ë‚˜ì¤‘ì— ì¬ì‹œë„ ê°€ëŠ¥)
```

---

### 4.10 Multi-Layer Execution (ë‹¤ê³„ì¸µ ì‹¤í–‰)

**ëª©ì **: ì‘ì—… ë³µì¡ë„ì— ë”°ë¼ ì ì ˆí•œ ì‹¤í–‰ ê³„ì¸µ ì„ íƒ

**ìœ„ì¹˜**: `src/execution/`

#### 4ê°œ ì‹¤í–‰ ê³„ì¸µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Execution Layers                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Layer 1: Standard Tools (ê°€ì¥ ë¹ ë¦„)                        â”‚
â”‚           read_file, write_file, list_files, find_files     â”‚
â”‚           ë‹¨ìˆœ íŒŒì¼ ì‘ì—…                                    â”‚
â”‚                                                             â”‚
â”‚  Layer 2: SDK/Code-Gen (ì¤‘ê°„)                               â”‚
â”‚           ë™ì ìœ¼ë¡œ TypeScript ì½”ë“œ ìƒì„± ë° ì‹¤í–‰             â”‚
â”‚           ë³µì¡í•œ ë°ì´í„° ì²˜ë¦¬                                â”‚
â”‚                                                             â”‚
â”‚  Layer 3: SubAgent (ëŠë¦¼)                                   â”‚
â”‚           ë³„ë„ LLM ì„¸ì…˜ìœ¼ë¡œ ë³µì¡í•œ ì‘ì—… ìœ„ì„                â”‚
â”‚           ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§                                   â”‚
â”‚                                                             â”‚
â”‚  Layer 4: Skills (ì „ë¬¸í™”)                                   â”‚
â”‚           íŠ¹ì • ë„ë©”ì¸ ì „ë¬¸ ê¸°ëŠ¥                             â”‚
â”‚           TDD ì›Œí¬í”Œë¡œìš°, ì½”ë“œ ë¦¬ë·° ë“±                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ìë™ ê³„ì¸µ ì„ íƒ

```typescript
// LayerManagerê°€ ì‘ì—… ë³µì¡ë„ë¥¼ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ ê³„ì¸µ ì„ íƒ
const layer = layerManager.selectLayer(task);

switch (layer) {
  case 'standard':
    // ë‹¨ìˆœ ë„êµ¬ í˜¸ì¶œ
    return standardTools.execute(task);
  case 'code-gen':
    // ì½”ë“œ ìƒì„± ë° ì‹¤í–‰
    return sdkLayer.generateAndExecute(task);
  case 'subagent':
    // ì„œë¸Œ ì—ì´ì „íŠ¸ì— ìœ„ì„
    return subagentLayer.delegate(task);
  case 'skills':
    // ì „ë¬¸ ìŠ¤í‚¬ ì‚¬ìš©
    return skillsLayer.apply(task);
}
```

---

## 5. ë°ì´í„° íë¦„ ì•„í‚¤í…ì²˜

### ì „ì²´ ì‹¤í–‰ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Input                                â”‚
â”‚                    (í„°ë¯¸ë„ì—ì„œ ë©”ì‹œì§€ ì…ë ¥)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   React/Ink UI Layer                             â”‚
â”‚              src/ui/components/PlanExecuteApp.tsx                â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ TextInput    â”‚  â”‚ FileBrowser  â”‚  â”‚ CommandBrowserâ”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Core Logic Layer                            â”‚
â”‚                        src/core/                                 â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Plan Phase (ì‚¬ìš©ì ìš”ì²­ â†’ TODO ë¦¬ìŠ¤íŠ¸ ìƒì„±)              â”‚   â”‚
â”‚  â”‚   PlanningLLM.generateTODOList()                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Execute Phase (ê° TODO ìˆœì°¨ ì‹¤í–‰)                        â”‚   â”‚
â”‚  â”‚   for each TODO:                                          â”‚   â”‚
â”‚  â”‚     1. ContextGatherer.gather()                           â”‚   â”‚
â”‚  â”‚     2. ActionExecutor.execute()                           â”‚   â”‚
â”‚  â”‚     3. WorkVerifier.verify()                              â”‚   â”‚
â”‚  â”‚     4. If fail â†’ retry with feedback                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Execution Layer                               â”‚
â”‚                     src/execution/                               â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Standard   â”‚ â”‚ SDK/       â”‚ â”‚ SubAgent   â”‚ â”‚ Skills     â”‚   â”‚
â”‚  â”‚ Tools      â”‚ â”‚ Code-Gen   â”‚ â”‚ Layer      â”‚ â”‚ Layer      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               External Systems / LLM API                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ File       â”‚  â”‚ LLM API    â”‚  â”‚ Bash       â”‚                 â”‚
â”‚  â”‚ System     â”‚  â”‚ (OpenAI)   â”‚  â”‚ Commands   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ìƒˆ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°

### 6.1 ìƒˆ Tool ì¶”ê°€

**1ë‹¨ê³„**: `src/tools/file-tools.ts`ì— ë„êµ¬ ì •ì˜ ì¶”ê°€

```typescript
export const myNewTool = {
  type: 'function' as const,
  function: {
    name: 'my_tool',
    description: 'Description of what the tool does',
    parameters: {
      type: 'object',
      properties: {
        param1: { type: 'string', description: 'Parameter description' }
      },
      required: ['param1']
    }
  }
};
```

**2ë‹¨ê³„**: ë„êµ¬ ì‹¤í–‰ í•¨ìˆ˜ êµ¬í˜„

```typescript
export async function executeMyTool(args: { param1: string }): Promise<string> {
  logger.enter('executeMyTool', { args });

  try {
    // ë„êµ¬ ë¡œì§ êµ¬í˜„
    const result = await doSomething(args.param1);

    logger.exit('executeMyTool', { success: true });
    return result;
  } catch (error) {
    logger.error('executeMyTool failed', error);
    throw error;
  }
}
```

**3ë‹¨ê³„**: `src/core/llm-client.ts`ì—ì„œ ë„êµ¬ ë“±ë¡

### 6.2 ìƒˆ UI ì»´í¬ë„ŒíŠ¸ ì¶”ê°€

**1ë‹¨ê³„**: `src/ui/components/`ì— ì»´í¬ë„ŒíŠ¸ íŒŒì¼ ìƒì„±

```tsx
// src/ui/components/MyComponent.tsx
import React from 'react';
import { Box, Text } from 'ink';
import { logger } from '../../utils/logger.js';

interface MyComponentProps {
  title: string;
  onSelect: (value: string) => void;
}

export const MyComponent: React.FC<MyComponentProps> = ({ title, onSelect }) => {
  logger.enter('MyComponent render', { title });

  return (
    <Box flexDirection="column" borderStyle="round" borderColor="cyan">
      <Text bold color="cyan">{title}</Text>
      {/* ì»´í¬ë„ŒíŠ¸ ë‚´ìš© */}
    </Box>
  );
};
```

**2ë‹¨ê³„**: `PlanExecuteApp.tsx`ì—ì„œ import ë° ì‚¬ìš©

### 6.3 ìƒˆ Core ê¸°ëŠ¥ ì¶”ê°€

**1ë‹¨ê³„**: `src/core/`ì— íŒŒì¼ ìƒì„± (kebab-case.ts)

```typescript
// src/core/my-feature.ts
import { logger } from '../utils/logger.js';

export class MyFeature {
  constructor() {
    logger.enter('MyFeature.constructor');
    logger.exit('MyFeature.constructor');
  }

  async execute(input: string): Promise<string> {
    logger.enter('MyFeature.execute', { input });

    try {
      logger.flow('Processing input');
      const result = await this.process(input);

      logger.vars({ name: 'result', value: result });
      logger.exit('MyFeature.execute', { success: true });

      return result;
    } catch (error) {
      logger.error('MyFeature.execute failed', error);
      throw error;
    }
  }
}
```

---

## 7. ì½”ë”© ê·œì¹™

### 7.1 íŒŒì¼ ëª…ëª… ê·œì¹™

| ì¢…ë¥˜ | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| Core ë¡œì§ | kebab-case.ts | `llm-client.ts`, `config-manager.ts` |
| UI ì»´í¬ë„ŒíŠ¸ | PascalCase.tsx | `PlanExecuteApp.tsx`, `StatusBar.tsx` |
| íƒ€ì… ì •ì˜ | index.ts ë˜ëŠ” types.ts | `types/index.ts` |
| ìœ í‹¸ë¦¬í‹° | kebab-case.ts | `file-system.ts`, `retry.ts` |

### 7.2 ë¡œê¹… ê·œì¹™ (í•„ìˆ˜!)

**ëª¨ë“  ìƒˆ ê¸°ëŠ¥ì—ëŠ” ë°˜ë“œì‹œ ìƒì„¸í•œ ë¡œê¹…ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.**

```typescript
import { logger } from '../utils/logger.js';

async function myFunction(userId: string, options: Options) {
  // 1. í•¨ìˆ˜ ì§„ì… (í•„ìˆ˜)
  logger.enter('myFunction', { userId, options });

  try {
    // 2. ì¤‘ìš”í•œ ë¶„ê¸°ì ë§ˆë‹¤ flow (ê¶Œì¥)
    logger.flow('Validating user');

    // 3. ë³µì¡í•œ ê³„ì‚° í›„ vars (ê¶Œì¥)
    const result = calculateSomething();
    logger.vars({ name: 'result', value: result });

    // 4. ìƒíƒœ ë³€ê²½ ì‹œ state (ê¶Œì¥)
    logger.state('User status', oldStatus, newStatus);

    // 5. ì‹œê°„ ì¸¡ì •ì´ í•„ìš”í•œ ì‘ì—… (ê¶Œì¥)
    logger.startTimer('database-query');
    const data = await database.query();
    logger.endTimer('database-query');

    // 6. í•¨ìˆ˜ ì¢…ë£Œ (í•„ìˆ˜)
    logger.exit('myFunction', { success: true });
    return data;

  } catch (error) {
    // 7. ì—ëŸ¬ ë¡œê¹… (í•„ìˆ˜)
    logger.error('myFunction failed', error);
    throw error;
  }
}
```

**ìƒì„¸í•œ ë¡œê¹… ê°€ì´ë“œ**: [02_LOGGING.md](./02_LOGGING.md) ì°¸ì¡°

### 7.3 íƒ€ì… ì•ˆì „ì„±

```typescript
// í•­ìƒ ëª…ì‹œì  íƒ€ì… ì‚¬ìš©
interface TodoItem {
  id: string;
  title: string;
  status: 'pending' | 'in_progress' | 'completed' | 'failed';
}

// unknown ëŒ€ì‹  êµ¬ì²´ì ì¸ íƒ€ì…
function processData(data: ProcessedData): Result {
  // ...
}
```

### 7.4 ì—ëŸ¬ ì²˜ë¦¬

```typescript
import { BaseError, LLMError, NetworkError } from '../errors/index.js';

try {
  await llmClient.sendMessage(message);
} catch (error) {
  if (error instanceof NetworkError) {
    logger.error('Network issue', error);
    // ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì²˜ë¦¬
  } else if (error instanceof LLMError) {
    logger.error('LLM issue', error);
    // LLM ì—ëŸ¬ ì²˜ë¦¬
  } else {
    throw error;  // ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ëŠ” ìƒìœ„ë¡œ ì „íŒŒ
  }
}
```

---

## 8. CLI ì‹¤í–‰ ëª¨ë“œ

### 8.1 ëª¨ë“œ ë¹„êµ

| ëª¨ë“œ | ëª…ë ¹ì–´ | ë¡œê·¸ ë ˆë²¨ | ìš©ë„ |
|------|--------|----------|------|
| Normal | `open` | INFO | ì¼ë°˜ ì‚¬ìš© |
| Verbose | `open --verbose` | DEBUG | ê°œë°œ/ë””ë²„ê¹… |
| Debug | `open --debug` | VERBOSE | ì‹¬ì¸µ ë¶„ì„ |

### 8.2 ëª¨ë“œë³„ ì¶œë ¥

**Normal Mode:**
```
[2025-11-12T10:30:00.123Z] [OPEN-CLI] â„¹ï¸  INFO: ì„œë²„ ì‹œì‘ë¨
[2025-11-12T10:30:00.125Z] [OPEN-CLI] âš ï¸  WARN: ì„¤ì • íŒŒì¼ ì—†ìŒ
```

**Verbose Mode:**
```
[2025-11-12T10:30:00.123Z] [OPEN-CLI] [app.ts:42:startApp] â†“ ENTER: startApp
[2025-11-12T10:30:00.124Z] [OPEN-CLI] [app.ts:45:startApp] âœ FLOW: ì„¤ì • ë¡œë“œ ì¤‘
[2025-11-12T10:30:00.125Z] [OPEN-CLI] [app.ts:48:startApp] ğŸ“¦ VARS:
   config.endpoint="https://api.example.com" (string)
[2025-11-12T10:30:00.126Z] [OPEN-CLI] [app.ts:52:startApp] â†‘ EXIT: startApp
```

**Debug Mode:**
```
[2025-11-12T10:30:00.123Z] [OPEN-CLI] [http.ts:42:request] â†’ HTTP REQUEST: POST https://api.example.com/v1/chat
  Body: { "messages": [...] }
[2025-11-12T10:30:00.456Z] [OPEN-CLI] [http.ts:67:request] â† HTTP RESPONSE: 200 OK
  Data: { "choices": [...] }
```

---

## ë¬¸ì„œ ê´€ë¦¬ ê·œì¹™

- ëª¨ë“  ë¬¸ì„œëŠ” `docs/` í´ë”ì— ë§ˆí¬ë‹¤ìš´(`.md`)ìœ¼ë¡œ ì‘ì„±
- **5ê°œ ì´í•˜ì˜ í•µì‹¬ ë¬¸ì„œ**ë§Œ ìœ ì§€
- ê¸°ëŠ¥ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ ê´€ë ¨ ë¬¸ì„œë„ ì—…ë°ì´íŠ¸
- ë¬¸ì„œ ëª©ë¡:
  1. `README.md` - í”„ë¡œì íŠ¸ ì†Œê°œ ë° ë¹ ë¥¸ ì‹œì‘
  2. `docs/01_DEVELOPMENT.md` - ê°œë°œì ì¢…í•© ê°€ì´ë“œ (ì´ ë¬¸ì„œ)
  3. `docs/02_LOGGING.md` - ë¡œê¹… ì‹œìŠ¤í…œ ìƒì„¸ ê°€ì´ë“œ
  4. `docs/03_TESTING.md` - E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„± ê°€ì´ë“œ

---

**ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆìœ¼ë©´ GitHub Issuesë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”!**
